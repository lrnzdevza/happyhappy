(()=>{var e={};e.id=2524,e.ids=[2524],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},41437:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>u,routeModule:()=>g,tree:()=>l});var a=r(73137),t=r(54647),o=r(4183),n=r.n(o),i=r(71775),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(s,c);let p=a.AppPageRouteModule,l=["",{children:["(pages)",{children:["account",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,92592)),"/Users/lorenzoparisi/Documents/GitHub/happyhappy/src/app/(pages)/account/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,77060)),"/Users/lorenzoparisi/Documents/GitHub/happyhappy/src/app/(pages)/account/layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(r.bind(r,45653)),"/Users/lorenzoparisi/Documents/GitHub/happyhappy/src/app/(pages)/not-found.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,82645)),"/Users/lorenzoparisi/Documents/GitHub/happyhappy/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,51918,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/lorenzoparisi/Documents/GitHub/happyhappy/src/app/(pages)/account/page.tsx"],d="/(pages)/account/page",m={require:r,loadChunk:()=>Promise.resolve()},g=new p({definition:{kind:t.x.APP_PAGE,page:"/(pages)/account/page",pathname:"/account",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},84117:(e,s,r)=>{Promise.resolve().then(r.bind(r,71821))},71821:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m});var a=r(60080),t=r(9885),o=r(66558),n=r(57114),i=r(39496),c=r(92672),p=r(42655),l=r(8693),u=r(99117),d=r.n(u);let m=()=>{let[e,s]=(0,t.useState)(""),[r,u]=(0,t.useState)(""),{user:m,setUser:g}=(0,l.a)(),[h,x]=(0,t.useState)(!1),{register:_,handleSubmit:y,formState:{errors:f,isLoading:b},reset:w,watch:P}=(0,o.cI)(),j=(0,t.useRef)({});j.current=P("password","");let v=(0,n.useRouter)(),C=(0,t.useCallback)(async e=>{if(m){let r=await fetch(`https://happy-hearts.payloadcms.app/api/users/${m.id}`,{credentials:"include",method:"PATCH",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(r.ok){let e=await r.json();g(e.doc),u("Successfully updated account."),s(""),x(!1),w({email:e.doc.email,name:e.doc.name,password:"",passwordConfirm:""})}else s("There was a problem updating your account.")}},[m,g,w]);return(0,t.useEffect)(()=>{null===m&&v.push(`/login?error=${encodeURIComponent("You must be logged in to view this page.")}&redirect=${encodeURIComponent("/account")}`),m&&w({email:m.email,name:m.name,password:"",passwordConfirm:""})},[m,v,w,h]),(0,a.jsxs)("form",{onSubmit:y(C),className:d().form,children:[a.jsx(p.v,{error:e,success:r,className:d().message}),h?(0,a.jsxs)(t.Fragment,{children:[(0,a.jsxs)("p",{children:["Change your password below, or ",a.jsx("button",{type:"button",className:d().changePassword,onClick:()=>x(!h),children:"cancel"}),"."]}),a.jsx(c.I,{name:"password",type:"password",label:"Password",required:!0,register:_,error:f.password}),a.jsx(c.I,{name:"passwordConfirm",type:"password",label:"Confirm Password",required:!0,register:_,validate:e=>e===j.current||"The passwords do not match",error:f.passwordConfirm})]}):(0,a.jsxs)(t.Fragment,{children:[a.jsx(c.I,{name:"email",label:"Email Address",required:!0,register:_,error:f.email,type:"email"}),a.jsx(c.I,{name:"name",label:"Name",register:_,error:f.name}),(0,a.jsxs)("p",{children:["Change your account details below, or ",a.jsx("button",{type:"button",className:d().changePassword,onClick:()=>x(!h),children:"click here"})," to change your password."]})]}),a.jsx(i.Button,{type:"submit",label:b?"Processing":h?"Change Password":"Update Account",disabled:b,appearance:"primary",className:d().submit})]})}},42655:(e,s,r)=>{"use strict";r.d(s,{v:()=>n});var a=r(60080);r(9885);var t=r(8514),o=r.n(t);let n=({message:e,error:s,success:r,warning:t,className:n})=>{let i=e||s||r||t;return i?a.jsx("div",{className:[o().message,n,s&&o().error,r&&o().success,t&&o().warning,!s&&!r&&!t&&o().default].filter(Boolean).join(" "),children:i}):null}},99117:e=>{e.exports={form:"AccountForm_form__lSVWE",changePassword:"AccountForm_changePassword__92rDX",submit:"AccountForm_submit__sVozx"},e.exports.__checksum="c6acafd35efe"},8514:e=>{e.exports={message:"Message_message__z1tdG",default:"Message_default__RDDb4",warning:"Message_warning__FT9n8",error:"Message_error__WX2fA",success:"Message_success__Cnnxv"},e.exports.__checksum="21e7800cf184"},92592:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>d,metadata:()=>m});var a=r(48144);r(53830);var t=r(62208),o=r(17536);let n=(0,o.createProxy)(String.raw`/Users/lorenzoparisi/Documents/GitHub/happyhappy/src/app/(pages)/account/AccountForm/index.tsx`),{__esModule:i,$$typeof:c}=n,p=n.default;var l=r(29472),u=r.n(l);async function d(){return(0,a.jsxs)("div",{children:[a.jsx("h5",{className:u().personalInfo,children:"Personal Information"}),a.jsx(p,{})]})}let m={title:"Account",description:"Create an account or log in to your existing account.",openGraph:(0,t.T)({title:"Account",url:"/account"})}}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[4650,2560,7190,9928,6558,1224,8667,6965,2672,6360],()=>r(41437));module.exports=a})();